// Generated by CoffeeScript 2.7.0
var TYPE, downloadFile, echo, getRating, members, pretty, range, transfer;

echo = console.log;

range = _.range;

TYPE = 1; // 1=Standard 2=Rapid 3=Blitz

pretty = {};

members = {};

(async function() {
  var err, res1, res2;
  try {
    [res1, res2] = (await Promise.all([fetch('./pretty.json'), fetch('./databas.json')]));
    [pretty, members] = (await Promise.all([res1.json(), res2.json()]));
    return transfer(TYPE);
  } catch (error) {
    err = error;
    return console.error('Fel vid hÃ¤mtning:', err);
  }
})();

getRating = function(member, type) {
  if (member[type] > 0) {
    return member[type];
  }
  if (member[type - 1] > 0) {
    return member[type - 1];
  }
  if (member[type - 2] > 0) {
    return member[type - 2];
  }
};

transfer = function(type) {
  var fidenumber, fidenumbers, j, len, member, name, rating, result;
  fidenumbers = textarea0.value.split("\n");
  result = [];
  for (j = 0, len = fidenumbers.length; j < len; j++) {
    fidenumber = fidenumbers[j];
    if (fidenumber.trim() === "") {
      continue;
    }
    member = !(fidenumber in members) ? ['saknas!', "0", "0", "0"] : members[fidenumber];
    rating = getRating(member, type);
    if (rating === '0') {
      rating = "0000";
    }
    name = fidenumber in pretty ? pretty[fidenumber] : member[0];
    result.push(rating + ' ' + name);
  }
  return textarea1.value = result.join("\n");
};

textarea0.addEventListener('input', function(e) {
  return transfer(TYPE);
});

save.addEventListener('click', function(e) {
  var i, s, t;
  s = textarea0.value.trim().split('\n');
  t = textarea1.value.trim().split('\n');
  return downloadFile('turnering.txt', ((function() {
    var j, len, ref, results;
    ref = range(s.length);
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      results.push(s[i] + ' ' + t[i]);
    }
    return results;
  })()).join('\n'));
});

downloadFile = function(filename, content, mime = 'text/plain') {
  var a, blob, url;
  blob = new Blob([content], {
    type: mime // eller 'application/json' etc
  });
  url = URL.createObjectURL(blob);
  a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  a.remove();
  return setTimeout((function() {
    return URL.revokeObjectURL(url);
  }), 0);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJza2V0Y2guY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQTs7QUFBQSxJQUFBLEdBQU8sT0FBTyxDQUFDOztBQUNmLEtBQUEsR0FBUSxDQUFDLENBQUM7O0FBRVYsSUFBQSxHQUFPLEVBSFA7O0FBS0EsTUFBQSxHQUFTLENBQUE7O0FBQ1QsT0FBQSxHQUFVLENBQUE7O0FBRVAsQ0FBQSxNQUFBLFFBQUEsQ0FBQSxDQUFBO0FBQ0gsTUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBO0FBQUM7SUFDQyxDQUFDLElBQUQsRUFBTyxJQUFQLENBQUEsR0FBZSxDQUFBLE1BQU0sT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFDLEtBQUEsQ0FBTSxlQUFOLENBQUQsRUFBeUIsS0FBQSxDQUFNLGdCQUFOLENBQXpCLENBQVosQ0FBTjtJQUNmLENBQUMsTUFBRCxFQUFTLE9BQVQsQ0FBQSxHQUFvQixDQUFBLE1BQU0sT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFDLElBQUksQ0FBQyxJQUFMLENBQUEsQ0FBRCxFQUFjLElBQUksQ0FBQyxJQUFMLENBQUEsQ0FBZCxDQUFaLENBQU47V0FDcEIsUUFBQSxDQUFTLElBQVQsRUFIRDtHQUlBLGFBQUE7SUFBTTtXQUNMLE9BQU8sQ0FBQyxLQUFSLENBQWMsbUJBQWQsRUFBbUMsR0FBbkMsRUFERDs7QUFMRSxDQUFBOztBQVFILFNBQUEsR0FBWSxRQUFBLENBQUMsTUFBRCxFQUFRLElBQVIsQ0FBQTtFQUNYLElBQUcsTUFBTSxDQUFDLElBQUQsQ0FBTixHQUFlLENBQWxCO0FBQXlCLFdBQU8sTUFBTSxDQUFDLElBQUQsRUFBdEM7O0VBQ0EsSUFBRyxNQUFNLENBQUMsSUFBQSxHQUFLLENBQU4sQ0FBTixHQUFpQixDQUFwQjtB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c291cmNlc0NvbnRlbnQiOlsiZWNobyA9IGNvbnNvbGUubG9nXHJcbnJhbmdlID0gXy5yYW5nZVxyXG5cclxuVFlQRSA9IDEgIyAxPVN0YW5kYXJkIDI9UmFwaWQgMz1CbGl0elxyXG5cclxucHJldHR5ID0ge31cclxubWVtYmVycyA9IHt9XHJcblxyXG5kbyAtPlxyXG5cdHRyeVxyXG5cdFx0W3JlczEsIHJlczJdID0gYXdhaXQgUHJvbWlzZS5hbGwgW2ZldGNoKCcuL3ByZXR0eS5qc29uJyksIGZldGNoKCcuL2RhdGFiYXMuanNvbicpXVxyXG5cdFx0W3ByZXR0eSwgbWVtYmVyc10gPSBhd2FpdCBQcm9taXNlLmFsbCBbcmVzMS5qc29uKCksIHJlczIuanNvbigpXVxyXG5cdFx0dHJhbnNmZXIgVFlQRVxyXG5cdGNhdGNoIGVyclxyXG5cdFx0Y29uc29sZS5lcnJvciAnRmVsIHZpZCBow6RtdG5pbmc6JywgZXJyXHJcblxyXG5nZXRSYXRpbmcgPSAobWVtYmVyLHR5cGUpIC0+XHJcblx0aWYgbWVtYmVyW3R5cGVdID4gMCB0aGVuIHJldHVybiBtZW1iZXJbdHlwZV1cclxuXHRpZiBtZW1iZXJbdHlwZS0xXSA+IDAgdGhlbiByZXR1cm4gbWVtYmVyW3R5cGUtMV1cclxuXHRpZiBtZW1iZXJbdHlwZS0yXSA+IDAgdGhlbiByZXR1cm4gbWVtYmVyW3R5cGUtMl1cclxuXHJcbnRyYW5zZmVyID0gKHR5cGUpIC0+XHJcblx0ZmlkZW51bWJlcnMgPSB0ZXh0YXJlYTAudmFsdWUuc3BsaXQgXCJcXG5cIlxyXG5cdHJlc3VsdCA9IFtdXHJcblx0Zm9yIGZpZGVudW1iZXIgaW4gZmlkZW51bWJlcnNcclxuXHRcdGlmIGZpZGVudW1iZXIudHJpbSgpID09IFwiXCIgdGhlbiBjb250aW51ZVxyXG5cdFx0bWVtYmVyID0gaWYgZmlkZW51bWJlciBub3Qgb2YgbWVtYmVycyB0aGVuIFsnc2FrbmFzIScsXCIwXCIsXCIwXCIsXCIwXCJdIGVsc2UgbWVtYmVyc1tmaWRlbnVtYmVyXVxyXG5cdFx0cmF0aW5nID0gZ2V0UmF0aW5nIG1lbWJlcix0eXBlXHJcblx0XHRpZiByYXRpbmcgPT0gJzAnIHRoZW4gcmF0aW5nID0gXCIwMDAwXCJcclxuXHRcdG5hbWUgPSBpZiBmaWRlbnVtYmVyIG9mIHByZXR0eSB0aGVuIHByZXR0eVtmaWRlbnVtYmVyXSBlbHNlIG1lbWJlclswXVxyXG5cdFx0cmVzdWx0LnB1c2ggcmF0aW5nICsgJyAnICsgbmFtZVxyXG5cdFxyXG5cdHRleHRhcmVhMS52YWx1ZSA9IHJlc3VsdC5qb2luIFwiXFxuXCJcclxuXHJcbnRleHRhcmVhMC5hZGRFdmVudExpc3RlbmVyICdpbnB1dCcsIChlKSAtPiB0cmFuc2ZlciBUWVBFXHJcblxyXG5zYXZlLmFkZEV2ZW50TGlzdGVuZXIgJ2NsaWNrJywgKGUpIC0+IFxyXG5cdHMgPSB0ZXh0YXJlYTAudmFsdWUudHJpbSgpLnNwbGl0ICdcXG4nXHJcblx0dCA9IHRleHRhcmVhMS52YWx1ZS50cmltKCkuc3BsaXQgJ1xcbidcclxuXHRkb3dubG9hZEZpbGUgJ3R1cm5lcmluZy50eHQnLCAoc1tpXSArICcgJyArIHRbaV0gZm9yIGkgaW4gcmFuZ2Ugcy5sZW5ndGgpLmpvaW4gJ1xcbidcclxuXHJcbmRvd25sb2FkRmlsZSA9IChmaWxlbmFtZSwgY29udGVudCwgbWltZT0ndGV4dC9wbGFpbicpIC0+XHJcblx0YmxvYiA9IG5ldyBCbG9iIFtjb250ZW50XSwge3R5cGU6IG1pbWV9ICAjIGVsbGVyICdhcHBsaWNhdGlvbi9qc29uJyBldGNcclxuXHR1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMIGJsb2JcclxuXHRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAnYSdcclxuXHRhLmhyZWYgPSB1cmxcclxuXHRhLmRvd25sb2FkID0gZmlsZW5hbWVcclxuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkIGFcclxuXHRhLmNsaWNrKClcclxuXHRhLnJlbW92ZSgpXHJcblx0c2V0VGltZW91dCAoLT4gVVJMLnJldm9rZU9iamVjdFVSTCB1cmwpLCAwXHJcbiJdfQ==
//# sourceURL=c:\github\2025\025-FIDE-ratinglist\sketch.coffee